<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cwebs: ws_iwire Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cwebs&#160;<span id="projectnumber">0.2.1</span></div>
   <div id="projectbrief">WebSocket wire protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('structws__iwire.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">ws_iwire Struct Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="ws_iwire" -->
<p>Incremental parser for WebSocket wire protocol (in-bound).  
 <a href="structws__iwire.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="iwire_8h_source.html">iwire.h</a>&gt;</code></p>

<p><a href="structws__iwire-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structws__iwire.html#af18ce4889a6eb4844285c8af95016ea6">new_message</a> )(struct <a class="el" href="structws__iwire.html">ws_iwire</a> *wire)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to signal that a new message has started.  <a href="#af18ce4889a6eb4844285c8af95016ea6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structws__iwire.html#a8ab9417efe9c6d1386b7756b07c3e705">end_message</a> )(struct <a class="el" href="structws__iwire.html">ws_iwire</a> *wire)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to signal that all message fragments were parsed.  <a href="#a8ab9417efe9c6d1386b7756b07c3e705"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structws__iwire.html#a00d30cb856c0a8401b67bf552e9b537a">new_fragment</a> )(struct <a class="el" href="structws__iwire.html">ws_iwire</a> *wire, <a class="el" href="types_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to signal that a new message fragment has arrived.  <a href="#a00d30cb856c0a8401b67bf552e9b537a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structws__iwire.html#aae75abaf68f93011c85102ff9f5cbef9">end_fragment</a> )(struct <a class="el" href="structws__iwire.html">ws_iwire</a> *wire)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to signal that the current fragment is complete.  <a href="#aae75abaf68f93011c85102ff9f5cbef9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structws__iwire.html#abfd59f1a86e45672e382027985e7aecb">accept_content</a> )(struct <a class="el" href="structws__iwire.html">ws_iwire</a> *wire, const void *data, <a class="el" href="types_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to signal that some of the message payload is available.  <a href="#abfd59f1a86e45672e382027985e7aecb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structws__iwire.html#a43168a9a6beffafb6ddd152da80a8425">baton</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">External state reserved for use by application callbacks.  <a href="#a43168a9a6beffafb6ddd152da80a8425"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Incremental parser for WebSocket wire protocol (in-bound). </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structws__owire.html" title="Incremental writer for WebSocket wire protocol (out-bound).">ws_owire</a> </dd>
<dd>
ws_iwire_state </dd>
<dd>
<a href="http://tools.ietf.org/html/rfc6455">http://tools.ietf.org/html/rfc6455</a></dd></dl>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000001">Bug:</a></b></dt><dd>The current parser implementation cannot handle control messages injected between message fragments (see RFC6455, section 5.4). </dd></dl>

<p>Definition at line <a class="el" href="iwire_8h_source.html#l00074">74</a> of file <a class="el" href="iwire_8h_source.html">iwire.h</a>.</p>
</div><hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="abfd59f1a86e45672e382027985e7aecb"></a><!-- doxytag: member="ws_iwire::accept_content" ref="abfd59f1a86e45672e382027985e7aecb" args=")(struct ws_iwire *wire, const void *data, uint64 size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* <a class="el" href="structws__iwire.html#abfd59f1a86e45672e382027985e7aecb">ws_iwire::accept_content</a>)(struct <a class="el" href="structws__iwire.html">ws_iwire</a> *wire, const void *data, <a class="el" href="types_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> size)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called to signal that some of the message payload is available. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">wire</td><td>The current parser state. </td></tr>
    <tr><td class="paramname">data</td><td>Array of bytes available to the parser state handler. Accessing past <em>size</em> bytes in this array results in undefined behavior. </td></tr>
    <tr><td class="paramname">size</td><td>Number of bytes in <em>data</em> the application can process.</td></tr>
  </table>
  </dd>
</dl>
<p>The application should not assume that the entire fragment payload is received at once. The parser forwards all data as it becomes available and may break up message fragments to avoid buffering data internally. If the application wishes to buffer incoming fragments to process entire fragments at once, it may do so by accumulating the data for successive calls until <code><a class="el" href="structws__iwire.html#aae75abaf68f93011c85102ff9f5cbef9" title="Called to signal that the current fragment is complete.">end_fragment()</a></code> is called.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structws__iwire.html#a43168a9a6beffafb6ddd152da80a8425" title="External state reserved for use by application callbacks.">baton</a> </dd></dl>

<p>Definition at line <a class="el" href="iwire_8h_source.html#l00164">164</a> of file <a class="el" href="iwire_8h_source.html">iwire.h</a>.</p>

</div>
</div>
<a class="anchor" id="a43168a9a6beffafb6ddd152da80a8425"></a><!-- doxytag: member="ws_iwire::baton" ref="a43168a9a6beffafb6ddd152da80a8425" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structws__iwire.html#a43168a9a6beffafb6ddd152da80a8425">ws_iwire::baton</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>External state reserved for use by application callbacks. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structws__iwire.html#af18ce4889a6eb4844285c8af95016ea6" title="Called to signal that a new message has started.">new_message()</a> </dd>
<dd>
<a class="el" href="structws__iwire.html#a8ab9417efe9c6d1386b7756b07c3e705" title="Called to signal that all message fragments were parsed.">end_message()</a> </dd>
<dd>
<a class="el" href="structws__iwire.html#a00d30cb856c0a8401b67bf552e9b537a" title="Called to signal that a new message fragment has arrived.">new_fragment()</a> </dd>
<dd>
<a class="el" href="structws__iwire.html#aae75abaf68f93011c85102ff9f5cbef9" title="Called to signal that the current fragment is complete.">end_fragment()</a> </dd>
<dd>
<a class="el" href="structws__iwire.html#abfd59f1a86e45672e382027985e7aecb" title="Called to signal that some of the message payload is available.">accept_content()</a> </dd></dl>

<p>Definition at line <a class="el" href="iwire_8h_source.html#l00176">176</a> of file <a class="el" href="iwire_8h_source.html">iwire.h</a>.</p>

</div>
</div>
<a class="anchor" id="aae75abaf68f93011c85102ff9f5cbef9"></a><!-- doxytag: member="ws_iwire::end_fragment" ref="aae75abaf68f93011c85102ff9f5cbef9" args=")(struct ws_iwire *wire)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* <a class="el" href="structws__iwire.html#aae75abaf68f93011c85102ff9f5cbef9">ws_iwire::end_fragment</a>)(struct <a class="el" href="structws__iwire.html">ws_iwire</a> *wire)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called to signal that the current fragment is complete. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">wire</td><td>The current parser state.</td></tr>
  </table>
  </dd>
</dl>
<p>This callback should be used to commit any buffered message contents.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structws__iwire.html#a43168a9a6beffafb6ddd152da80a8425" title="External state reserved for use by application callbacks.">baton</a> </dd></dl>

<p>Definition at line <a class="el" href="iwire_8h_source.html#l00143">143</a> of file <a class="el" href="iwire_8h_source.html">iwire.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8ab9417efe9c6d1386b7756b07c3e705"></a><!-- doxytag: member="ws_iwire::end_message" ref="a8ab9417efe9c6d1386b7756b07c3e705" args=")(struct ws_iwire *wire)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* <a class="el" href="structws__iwire.html#a8ab9417efe9c6d1386b7756b07c3e705">ws_iwire::end_message</a>)(struct <a class="el" href="structws__iwire.html">ws_iwire</a> *wire)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called to signal that all message fragments were parsed. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">wire</td><td>The current parser state.</td></tr>
  </table>
  </dd>
</dl>
<p>This callback should be used to commit any buffered message contents and reset any external state before processing the next message.</p>
<p>If the message was a closing control frame, the application should stop processing input data and possibly shutdown input on the TCP connection.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structws__iwire.html#a43168a9a6beffafb6ddd152da80a8425" title="External state reserved for use by application callbacks.">baton</a> </dd>
<dd>
<a class="el" href="iwire_8h.html#ac96d72a9748e85f143adefaa52a3b8b9" title="Check if the current fragment is a close frame.">ws_iwire_dead</a> </dd></dl>

<p>Definition at line <a class="el" href="iwire_8h_source.html#l00104">104</a> of file <a class="el" href="iwire_8h_source.html">iwire.h</a>.</p>

</div>
</div>
<a class="anchor" id="a00d30cb856c0a8401b67bf552e9b537a"></a><!-- doxytag: member="ws_iwire::new_fragment" ref="a00d30cb856c0a8401b67bf552e9b537a" args=")(struct ws_iwire *wire, uint64 size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* <a class="el" href="structws__iwire.html#a00d30cb856c0a8401b67bf552e9b537a">ws_iwire::new_fragment</a>)(struct <a class="el" href="structws__iwire.html">ws_iwire</a> *wire, <a class="el" href="types_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> size)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called to signal that a new message fragment has arrived. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">wire</td><td>The current parser state. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the message fragment (see note below).</td></tr>
  </table>
  </dd>
</dl>
<p>This callback should be used to prepare to accept the message payload. At this point, most of the frame's header has been parsed and the different state checks (e.g. the message type) can be performed.</p>
<p>This call will be followed by zero or more calls to <code><a class="el" href="structws__iwire.html#abfd59f1a86e45672e382027985e7aecb" title="Called to signal that some of the message payload is available.">accept_content()</a></code>, which will then be followed by a call to <code><a class="el" href="structws__iwire.html#aae75abaf68f93011c85102ff9f5cbef9" title="Called to signal that the current fragment is complete.">end_fragment()</a></code>.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>If the message is fragmented (<code>ws_iwire_last(wire)==0</code>), then the total size of the message is unavailable. The WebSocket specification thus allows messages of unlimited size.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structws__iwire.html#a43168a9a6beffafb6ddd152da80a8425" title="External state reserved for use by application callbacks.">baton</a> </dd>
<dd>
<a class="el" href="iwire_8h.html#ad5018c9617b70b1f51a5ca6e4e1ed828" title="Check if the current frame is the message&#39;s last fragment.">ws_iwire_last</a> </dd>
<dd>
<a class="el" href="iwire_8h.html#a1a5f886c8873de1b95241f71cc4c5a42" title="Check if the current frame is masked.">ws_iwire_mask</a> </dd>
<dd>
<a class="el" href="iwire_8h.html#a68989aa84e350daf1f1231d21fee0155" title="Check if the current frame is a ping message.">ws_iwire_ping</a> </dd>
<dd>
<a class="el" href="iwire_8h.html#a16b038ba0e61855f449d7e01d99b9905" title="Check if the current frame is a pong message.">ws_iwire_pong</a> </dd>
<dd>
<a class="el" href="iwire_8h.html#a3b24feccbba88b4a379ff37c1a8300c4" title="Check if the current fragment is a UTF-8 text message.">ws_iwire_text</a> </dd>
<dd>
<a class="el" href="iwire_8h.html#a78a4e59369847dca0d4c02ef3a97becf" title="Check if the current fragment is a binary message.">ws_iwire_data</a> </dd>
<dd>
<a class="el" href="iwire_8h.html#ac96d72a9748e85f143adefaa52a3b8b9" title="Check if the current fragment is a close frame.">ws_iwire_dead</a> </dd></dl>

<p>Definition at line <a class="el" href="iwire_8h_source.html#l00132">132</a> of file <a class="el" href="iwire_8h_source.html">iwire.h</a>.</p>

</div>
</div>
<a class="anchor" id="af18ce4889a6eb4844285c8af95016ea6"></a><!-- doxytag: member="ws_iwire::new_message" ref="af18ce4889a6eb4844285c8af95016ea6" args=")(struct ws_iwire *wire)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* <a class="el" href="structws__iwire.html#af18ce4889a6eb4844285c8af95016ea6">ws_iwire::new_message</a>)(struct <a class="el" href="structws__iwire.html">ws_iwire</a> *wire)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called to signal that a new message has started. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">wire</td><td>The current parser state.</td></tr>
  </table>
  </dd>
</dl>
<dl class="warning"><dt><b>Warning:</b></dt><dd>The current parser state (other than <code>baton</code>) is unreliable: this callback is invoked <em>before</em> the frame header is parsed. This callback should mostly be used to clear any leftover state from the previous message.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structws__iwire.html#a43168a9a6beffafb6ddd152da80a8425" title="External state reserved for use by application callbacks.">baton</a> </dd></dl>

<p>Definition at line <a class="el" href="iwire_8h_source.html#l00088">88</a> of file <a class="el" href="iwire_8h_source.html">iwire.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>code/<a class="el" href="iwire_8h_source.html">iwire.h</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="structws__iwire.html">ws_iwire</a>      </li>
      <li class="footer">Generated on Thu Feb 2 2012 23:22:16 for cwebs by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
