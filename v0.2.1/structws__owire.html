<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cwebs: ws_owire Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cwebs&#160;<span id="projectnumber">0.2.1</span></div>
   <div id="projectbrief">WebSocket wire protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('structws__owire.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">ws_owire Struct Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="ws_owire" -->
<p>Incremental writer for WebSocket wire protocol (out-bound).  
 <a href="structws__owire.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="owire_8h_source.html">owire.h</a>&gt;</code></p>

<p><a href="structws__owire-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structws__owire.html#a2c28be815ac514a40550b7c6e6d58819">accept_content</a> )(struct <a class="el" href="structws__owire.html">ws_owire</a> *wire, const void *data, <a class="el" href="types_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to signal that some data should be transferred.  <a href="#a2c28be815ac514a40550b7c6e6d58819"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structws__owire.html#a75384276f1bd48d9a5e01744628394b6">rand</a> )(struct <a class="el" href="structws__owire.html">ws_owire</a> *wire, <a class="el" href="types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mask[4])</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to signal that a mask must be generated.  <a href="#a75384276f1bd48d9a5e01744628394b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structws__owire.html#af2a8e1ee619e249d33255052ad11398e">baton</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">External state reserved for use by application callbacks.  <a href="#af2a8e1ee619e249d33255052ad11398e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structws__owire.html#a60226c10460bb7c2d708688796e9d73f">prng</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">External state reserved for use by application callbacks.  <a href="#a60226c10460bb7c2d708688796e9d73f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="owire_8h.html#aa481a21b96ba02628a81ff7e93c3d117">ws_owire_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structws__owire.html#a851223f75368aeeed7e4827d9f409758">error</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The writer object's current error code.  <a href="#a851223f75368aeeed7e4827d9f409758"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structws__owire.html#ac0dc0742f3476ca2dfa9ab6d8f75b09f">auto_fragment</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set to a nonzero value to enable automatic fragmentation.  <a href="#ac0dc0742f3476ca2dfa9ab6d8f75b09f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structws__owire.html#a73147c07b55ab76f666ba29ce5983239">auto_mask</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set to 1 to enable automatic masking of outgoing frames.  <a href="#a73147c07b55ab76f666ba29ce5983239"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Incremental writer for WebSocket wire protocol (out-bound). </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structws__iwire.html" title="Incremental parser for WebSocket wire protocol (in-bound).">ws_iwire</a> </dd>
<dd>
ws_owire_state </dd>
<dd>
<a href="http://tools.ietf.org/html/rfc6455">http://tools.ietf.org/html/rfc6455</a> </dd></dl>

<p>Definition at line <a class="el" href="owire_8h_source.html#l00082">82</a> of file <a class="el" href="owire_8h_source.html">owire.h</a>.</p>
</div><hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a2c28be815ac514a40550b7c6e6d58819"></a><!-- doxytag: member="ws_owire::accept_content" ref="a2c28be815ac514a40550b7c6e6d58819" args=")(struct ws_owire *wire, const void *data, uint64 size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* <a class="el" href="structws__owire.html#a2c28be815ac514a40550b7c6e6d58819">ws_owire::accept_content</a>)(struct <a class="el" href="structws__owire.html">ws_owire</a> *wire, const void *data, <a class="el" href="types_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> size)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called to signal that some data should be transferred. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">wire</td><td>The current writer state. </td></tr>
    <tr><td class="paramname">data</td><td>Array of bytes to be transferred to the peer. Accessing past <em>size</em> bytes in this array results in undefined behavior. </td></tr>
    <tr><td class="paramname">size</td><td>Number of bytes in <em>data</em> the application must send.</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structws__owire.html#af2a8e1ee619e249d33255052ad11398e" title="External state reserved for use by application callbacks.">baton</a> </dd></dl>

<p>Definition at line <a class="el" href="owire_8h_source.html#l00095">95</a> of file <a class="el" href="owire_8h_source.html">owire.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac0dc0742f3476ca2dfa9ab6d8f75b09f"></a><!-- doxytag: member="ws_owire::auto_fragment" ref="ac0dc0742f3476ca2dfa9ab6d8f75b09f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> <a class="el" href="structws__owire.html#ac0dc0742f3476ca2dfa9ab6d8f75b09f">ws_owire::auto_fragment</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set to a nonzero value to enable automatic fragmentation. </p>
<p>Automatic fragmentation of messages is normally only used during testing. If set to any nonzero value, the writer will ensure that no data or text messages will contain fragments large than this size (control messages cannot be fragmented). To achieve this, the writer breaks up large messages into chuncks of at most <em>auto_fragment</em> bytes in size. </p>

<p>Definition at line <a class="el" href="owire_8h_source.html#l00162">162</a> of file <a class="el" href="owire_8h_source.html">owire.h</a>.</p>

</div>
</div>
<a class="anchor" id="a73147c07b55ab76f666ba29ce5983239"></a><!-- doxytag: member="ws_owire::auto_mask" ref="a73147c07b55ab76f666ba29ce5983239" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structws__owire.html#a73147c07b55ab76f666ba29ce5983239">ws_owire::auto_mask</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set to 1 to enable automatic masking of outgoing frames. </p>
<p>Clients are required to mask all outgoing frames and should enable automatic masking for the higher-level writer API functions. Servers must never enable automatic masking. </p>

<p>Definition at line <a class="el" href="owire_8h_source.html#l00172">172</a> of file <a class="el" href="owire_8h_source.html">owire.h</a>.</p>

</div>
</div>
<a class="anchor" id="af2a8e1ee619e249d33255052ad11398e"></a><!-- doxytag: member="ws_owire::baton" ref="af2a8e1ee619e249d33255052ad11398e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structws__owire.html#af2a8e1ee619e249d33255052ad11398e">ws_owire::baton</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>External state reserved for use by application callbacks. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structws__owire.html#a2c28be815ac514a40550b7c6e6d58819" title="Called to signal that some data should be transferred.">accept_content()</a> </dd></dl>

<p>Definition at line <a class="el" href="owire_8h_source.html#l00125">125</a> of file <a class="el" href="owire_8h_source.html">owire.h</a>.</p>

</div>
</div>
<a class="anchor" id="a851223f75368aeeed7e4827d9f409758"></a><!-- doxytag: member="ws_owire::error" ref="a851223f75368aeeed7e4827d9f409758" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="owire_8h.html#aa481a21b96ba02628a81ff7e93c3d117">ws_owire_error</a> <a class="el" href="structws__owire.html#a851223f75368aeeed7e4827d9f409758">ws_owire::error</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The writer object's current error code. </p>
<p>This field should be considered as read-only, and must not be changed by applications. If paranoid, it should be checked after the call to each method. However, errors are only signaled when the object is misused and cannot be triggered by use of the higher-level writer API functions. Thus, once an application has been debugged, checking the error code after each call is unnecessary. </p>

<p>Definition at line <a class="el" href="owire_8h_source.html#l00149">149</a> of file <a class="el" href="owire_8h_source.html">owire.h</a>.</p>

</div>
</div>
<a class="anchor" id="a60226c10460bb7c2d708688796e9d73f"></a><!-- doxytag: member="ws_owire::prng" ref="a60226c10460bb7c2d708688796e9d73f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="structws__owire.html#a60226c10460bb7c2d708688796e9d73f">ws_owire::prng</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>External state reserved for use by application callbacks. </p>
<p>This pointer is typically used to refer to the stateful pseudo random number generator that generates mask for the writer.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structws__owire.html#a75384276f1bd48d9a5e01744628394b6" title="Called to signal that a mask must be generated.">rand()</a> </dd></dl>

<p>Definition at line <a class="el" href="owire_8h_source.html#l00136">136</a> of file <a class="el" href="owire_8h_source.html">owire.h</a>.</p>

</div>
</div>
<a class="anchor" id="a75384276f1bd48d9a5e01744628394b6"></a><!-- doxytag: member="ws_owire::rand" ref="a75384276f1bd48d9a5e01744628394b6" args=")(struct ws_owire *wire, uint8 mask[4])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* <a class="el" href="structws__owire.html#a75384276f1bd48d9a5e01744628394b6">ws_owire::rand</a>)(struct <a class="el" href="structws__owire.html">ws_owire</a> *wire, <a class="el" href="types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mask[4])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called to signal that a mask must be generated. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">wire</td><td>The current writer state. </td></tr>
    <tr><td class="paramname">mask</td><td>4-byte array to fill in with random values.</td></tr>
  </table>
  </dd>
</dl>
<p>This method is invoked each time a masked frame is sent. This can either happend when using <code>auto_mask</code>, or when <code><a class="el" href="owire_8c.html#ab3b57e37ddf06cb42cff5a436ba005df" title="Mark the fragment as masked.">ws_owire_mask()</a></code> is called to manually add a mask.</p>
<p>By default, this callback invokes the standard library <code><a class="el" href="structws__owire.html#a75384276f1bd48d9a5e01744628394b6" title="Called to signal that a mask must be generated.">rand()</a></code> to generated masks. You should set this to a cryptographically secure random number generator. Also, care should be taken for thread safety in threaded applications since the standard library <code><a class="el" href="structws__owire.html#a75384276f1bd48d9a5e01744628394b6" title="Called to signal that a mask must be generated.">rand()</a></code> implementation is not guaranteed to be thread-safe.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="structws__owire.html#a60226c10460bb7c2d708688796e9d73f" title="External state reserved for use by application callbacks.">prng</a> </dd>
<dd>
<a class="el" href="structws__owire.html#a73147c07b55ab76f666ba29ce5983239" title="Set to 1 to enable automatic masking of outgoing frames.">auto_mask</a> </dd>
<dd>
<a class="el" href="owire_8c.html#ab3b57e37ddf06cb42cff5a436ba005df" title="Mark the fragment as masked.">ws_owire_mask()</a> </dd></dl>

<p>Definition at line <a class="el" href="owire_8h_source.html#l00117">117</a> of file <a class="el" href="owire_8h_source.html">owire.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>code/<a class="el" href="owire_8h_source.html">owire.h</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="structws__owire.html">ws_owire</a>      </li>
      <li class="footer">Generated on Thu Feb 2 2012 23:22:16 for cwebs by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
